<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JuruPinjam - Sistem Inventaris Jurusan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom styles untuk warna tema */
        .bg-primary { background-color: #800000; } /* Maroon */
        .text-primary { color: #800000; }
        .border-primary { border-color: #800000; }
        .bg-secondary { background-color: #FFD700; } /* Kuning Emas */
        .text-secondary { color: #FFD700; }
        .btn-primary {
            background-color: #800000;
            color: white;
            transition: background-color 0.3s;
        }
        .btn-primary:hover {
            background-color: #660000;
        }
        .btn-secondary {
            background-color: #FFD700;
            color: #333;
            transition: background-color 0.3s;
        }
        .btn-secondary:hover {
            background-color: #FFC700;
        }
        .tab-active {
            border-bottom: 2px solid #800000;
            color: #800000;
            font-weight: 600;
        }
        .tab-inactive {
            border-bottom: 2px solid transparent;
            color: #6b7280;
        }
    </style>
</head>
<body class="bg-gray-100">

    <!-- Container Utama -->
    <div id="app" class="max-w-md mx-auto bg-white min-h-screen shadow-lg">

        <!-- =================================================================== -->
        <!--                          LAYAR LOGIN                                -->
        <!-- =================================================================== -->
        <div id="login-screen" class="p-6">
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-primary">JuruPinjam</h1>
                <p class="text-gray-500">Sistem Inventaris Jurusan</p>
            </div>

            <!-- Tab Pilihan Login -->
            <div class="flex border-b mb-6">
                <button id="login-user-tab" class="flex-1 py-2 text-center tab-active" onclick="switchLoginTab('user')">Pengguna</button>
                <button id="login-admin-tab" class="flex-1 py-2 text-center tab-inactive" onclick="switchLoginTab('admin')">Admin</button>
            </div>

            <!-- Form Login Pengguna -->
            <div id="login-user-form">
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Login sebagai:</label>
                    <div class="flex space-x-4">
                        <label class="flex items-center">
                            <input type="radio" name="login_user_type" value="mahasiswa" class="text-primary focus:ring-primary" onchange="switchLoginFormIdentifier('mahasiswa')" checked>
                            <span class="ml-2">Mahasiswa</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="login_user_type" value="dosen" class="text-primary focus:ring-primary" onchange="switchLoginFormIdentifier('dosen')">
                            <span class="ml-2">Dosen</span>
                        </label>
                         <label class="flex items-center">
                            <input type="radio" name="login_user_type" value="pegawai" class="text-primary focus:ring-primary" onchange="switchLoginFormIdentifier('pegawai')">
                            <span class="ml-2">Pegawai</span>
                        </label>
                    </div>
                </div>
                
                <div id="login-nim-input" class="mb-4">
                    <label for="login-nim" class="block text-sm font-medium text-gray-700">NIM</label>
                    <input type="text" id="login-nim" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary" placeholder="Masukkan NIM">
                </div>
                 <div id="login-nip-input" class="mb-4 hidden">
                    <label for="login-nip" class="block text-sm font-medium text-gray-700">NIP</label>
                    <input type="text" id="login-nip" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary" placeholder="Masukkan NIP">
                </div>

                <div class="mb-6">
                    <label for="login-password-user" class="block text-sm font-medium text-gray-700">Password</label>
                    <input type="password" id="login-password-user" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary" placeholder="******">
                </div>
                <button class="w-full btn-primary font-bold py-2 px-4 rounded-md" onclick="login('user')">
                    Login
                </button>
            </div>
            
            <!-- Form Login Admin -->
            <div id="login-admin-form" class="hidden">
                 <div class="mb-4">
                    <label for="login-admin-id" class="block text-sm font-medium text-gray-700">ID Admin</label>
                    <input type="text" id="login-admin-id" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary" placeholder="Masukkan ID Admin">
                </div>
                <div class="mb-6">
                    <label for="login-password-admin" class="block text-sm font-medium text-gray-700">Password</label>
                    <input type="password" id="login-password-admin" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary" placeholder="******">
                </div>
                <button class="w-full btn-primary font-bold py-2 px-4 rounded-md" onclick="login('admin')">
                    Login Admin
                </button>
            </div>

            <p class="mt-8 text-center text-sm">
                Belum punya akun? 
                <button class="font-medium text-primary hover:underline" onclick="showScreen('register-screen')">Registrasi di sini</button>
            </p>
        </div>

        <!-- =================================================================== -->
        <!--                        LAYAR REGISTRASI                             -->
        <!-- =================================================================== -->
        <div id="register-screen" class="p-6 hidden">
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-primary">Registrasi Akun</h1>
                <p class="text-gray-500">Pilih jenis pengguna</p>
            </div>

            <!-- Pilihan Jenis Pengguna -->
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">Saya adalah seorang:</label>
                <div class="flex space-x-4">
                    <label class="flex items-center">
                        <input type="radio" name="user_type" value="mahasiswa" class="text-primary focus:ring-primary" onchange="switchRegisterForm('mahasiswa')" checked>
                        <span class="ml-2">Mahasiswa</span>
                    </label>
                    <label class="flex items-center">
                        <input type="radio" name="user_type" value="dosen_pegawai" class="text-primary focus:ring-primary" onchange="switchRegisterForm('dosen_pegawai')">
                        <span class="ml-2">Dosen / Pegawai</span>
                    </label>
                </div>
            </div>

            <!-- Form Registrasi Mahasiswa -->
            <div id="register-mahasiswa-form">
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700">Nama Lengkap</label>
                    <input type="text" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary" placeholder="Nama Lengkap">
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700">NIM</label>
                    <input type="text" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary" placeholder="Nomor Induk Mahasiswa">
                </div>
                <div class="grid grid-cols-2 gap-4 mb-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Angkatan</label>
                        <input type="number" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary" placeholder="2022">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Prodi</label>
                        <input type="text" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary" placeholder="Sistem Informasi">
                    </div>
                </div>
                 <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700">Password</label>
                    <input type="password" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm" placeholder="******">
                </div>
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700">Konfirmasi Password</label>
                    <input type="password" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm" placeholder="******">
                </div>
            </div>
            
            <!-- Form Registrasi Dosen/Pegawai -->
            <div id="register-dosen-pegawai-form" class="hidden">
                 <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700">Nama Lengkap</label>
                    <input type="text" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm" placeholder="Nama Lengkap dengan Gelar">
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700">NIP</label>
                    <input type="text" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm" placeholder="Nomor Induk Pegawai">
                </div>
                 <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700">Jabatan</label>
                    <input type="text" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm" placeholder="e.g. Dosen, Staf Akademik">
                </div>
                 <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700">Password</label>
                    <input type="password" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm" placeholder="******">
                </div>
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700">Konfirmasi Password</label>
                    <input type="password" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm" placeholder="******">
                </div>
            </div>

            <button class="w-full btn-primary font-bold py-2 px-4 rounded-md">
                Registrasi
            </button>
             <p class="mt-8 text-center text-sm">
                Sudah punya akun? 
                <button class="font-medium text-primary hover:underline" onclick="showScreen('login-screen')">Login di sini</button>
            </p>
        </div>

        <!-- =================================================================== -->
        <!--                        BERANDA PENGGUNA                             -->
        <!-- =================================================================== -->
        <div id="user-dashboard-screen" class="hidden">
            <!-- Header -->
            <header class="bg-primary p-4 flex justify-between items-center">
                <h1 class="text-white text-xl font-bold">Beranda</h1>
                <button class="text-white" onclick="showScreen('login-screen')">Logout</button>
            </header>

            <div class="p-6">
                <!-- Info Pengguna -->
                <div class="bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6">
                    <p id="user-info-name" class="font-bold text-lg text-gray-800">Selamat Datang!</p>
                    <p id="user-info-detail" class="text-sm text-gray-500">Memuat data pengguna...</p>
                </div>

                <!-- Menu Utama -->
                <div class="grid grid-cols-2 gap-4 mb-8">
                    <button class="bg-primary text-white p-4 rounded-lg shadow-md flex flex-col items-center justify-center space-y-2 hover:bg-red-900" onclick="showModal('peminjaman-modal')">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                        <span class="font-semibold">Pinjam Alat</span>
                    </button>
                    <button class="bg-gray-200 text-gray-800 p-4 rounded-lg shadow-md flex flex-col items-center justify-center space-y-2 hover:bg-gray-300" onclick="showModal('daftar-alat-modal')">
                         <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16" /></svg>
                        <span class="font-semibold">Daftar Alat</span>
                    </button>
                </div>

                <!-- Peminjaman Terkini -->
                <div>
                    <h2 class="text-xl font-bold text-gray-800 mb-4">Peminjaman Terkini</h2>
                    <div class="space-y-4">
                        <!-- Contoh item 1 -->
                        <div class="bg-white p-4 rounded-lg border border-gray-200">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h3 class="font-bold text-primary">Proyektor LCD Epson</h3>
                                    <p class="text-sm text-gray-500">Batas Kembali: 07 Okt 2025, 17:00</p>
                                </div>
                                <span class="text-xs font-semibold bg-blue-100 text-blue-800 px-2 py-1 rounded-full">Dipinjam</span>
                            </div>
                            <button class="w-full mt-4 btn-secondary font-bold py-2 px-4 rounded-md text-sm" onclick="showModal('kembalikan-modal')">
                                Kembalikan Alat
                            </button>
                        </div>
                        <!-- Contoh item 2 -->
                        <div class="bg-white p-4 rounded-lg border border-gray-200">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h3 class="font-bold text-primary">Stop Kontak 5 Lubang</h3>
                                    <p class="text-sm text-gray-500">Batas Kembali: 06 Okt 2025, 12:00</p>
                                </div>
                                <span class="text-xs font-semibold bg-blue-100 text-blue-800 px-2 py-1 rounded-full">Dipinjam</span>
                            </div>
                            <button class="w-full mt-4 btn-secondary font-bold py-2 px-4 rounded-md text-sm" onclick="showModal('kembalikan-modal')">
                                Kembalikan Alat
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Riwayat Peminjaman -->
                <div class="mt-8">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">Riwayat Peminjaman</h2>
                    <div class="space-y-3">
                         <!-- Contoh item riwayat 1 -->
                        <div class="bg-gray-50 p-3 rounded-lg border border-gray-200 opacity-70">
                            <div class="flex justify-between items-center">
                                <div>
                                    <h3 class="font-semibold text-gray-700">Konektor HDMI</h3>
                                    <p class="text-xs text-gray-500">Dikembalikan pada 01 Okt 2025</p>
                                </div>
                                <span class="text-xs font-semibold bg-green-100 text-green-800 px-2 py-1 rounded-full">Selesai</span>
                            </div>
                        </div>
                         <!-- Contoh item riwayat 2 -->
                        <div class="bg-gray-50 p-3 rounded-lg border border-gray-200 opacity-70">
                            <div class="flex justify-between items-center">
                                <div>
                                    <h3 class="font-semibold text-gray-700">Proyektor LCD Epson</h3>
                                    <p class="text-xs text-gray-500">Dikembalikan pada 29 Sep 2025</p>
                                </div>
                                <span class="text-xs font-semibold bg-green-100 text-green-800 px-2 py-1 rounded-full">Selesai</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- =================================================================== -->
        <!--                        BERANDA ADMIN                                -->
        <!-- =================================================================== -->
        <div id="admin-dashboard-screen" class="hidden">
            <!-- Header -->
            <header class="bg-primary p-4 flex justify-between items-center">
                <h1 class="text-white text-xl font-bold">Dashboard Admin</h1>
                <button class="text-white" onclick="showScreen('login-screen')">Logout</button>
            </header>
            
            <div class="p-6">
                <!-- Info Admin -->
                <div class="bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6">
                    <p class="font-bold text-lg text-gray-800">Admin Jurusan</p>
                    <p class="text-sm text-gray-500">Operator Aktif</p>
                </div>

                <!-- Menu Utama Admin -->
                <div class="grid grid-cols-2 gap-4 mb-8">
                    <button class="bg-primary text-white p-4 rounded-lg shadow-md flex flex-col items-center justify-center space-y-2 hover:bg-red-900" onclick="showModal('input-alat-modal')">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd" /></svg>
                        <span class="font-semibold text-center">Input Data Alat</span>
                    </button>
                    <button class="bg-gray-200 text-gray-800 p-4 rounded-lg shadow-md flex flex-col items-center justify-center space-y-2 hover:bg-gray-300" onclick="showModal('riwayat-peminjam-modal')">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 20 20" fill="currentColor"><path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z" /><path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z" clip-rule="evenodd" /></svg>
                        <span class="font-semibold text-center">Riwayat Peminjam</span>
                    </button>
                </div>
                
                <!-- Daftar Peminjam Real-time -->
                <div>
                    <h2 class="text-xl font-bold text-gray-800 mb-4">Peminjaman Aktif</h2>
                    <div class="space-y-4">
                        <!-- Contoh peminjam 1 -->
                        <div class="bg-white p-4 rounded-lg border border-yellow-400 border-2">
                             <div class="flex justify-between items-start">
                                <div>
                                    <h3 class="font-bold text-primary">John Doe (Mahasiswa)</h3>
                                    <p class="text-sm text-gray-600">Alat: Proyektor LCD Epson</p>
                                    <p class="text-xs text-gray-500">Keperluan: MK Rekayasa Perangkat Lunak</p>
                                    <p class="text-xs text-gray-500">Dosen: Dr. Jane Smith, S.Kom, M.Kom</p>
                                </div>
                                <span class="text-xs font-semibold bg-blue-100 text-blue-800 px-2 py-1 rounded-full">Dipinjam</span>
                            </div>
                        </div>
                        <!-- Contoh peminjam 2 -->
                        <div class="bg-white p-4 rounded-lg border border-yellow-400 border-2">
                             <div class="flex justify-between items-start">
                                <div>
                                    <h3 class="font-bold text-primary">Dr. Jane Smith (Dosen)</h3>
                                    <p class="text-sm text-gray-600">Alat: Stop Kontak 5 Lubang</p>
                                    <p class="text-xs text-gray-500">Keperluan: Mengajar Kelas A</p>
                                </div>
                                <span class="text-xs font-semibold bg-blue-100 text-blue-800 px-2 py-1 rounded-full">Dipinjam</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- =================================================================== -->
    <!--                             MODALS                                  -->
    <!-- =================================================================== -->
    <!-- Modal Peminjaman -->
    <div id="peminjaman-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-md p-6 relative max-h-screen overflow-y-auto">
            <button class="absolute top-4 right-4 text-gray-500 hover:text-gray-800" onclick="closeModal('peminjaman-modal')">&times;</button>
            <h2 class="text-2xl font-bold text-primary mb-4">Form Peminjaman</h2>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700">Jenis Alat</label>
                    <select class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm">
                        <option>Proyektor LCD Epson</option>
                        <option>Konektor HDMI</option>
                        <option>Stop Kontak 5 Lubang</option>
                    </select>
                </div>

                <!-- ================== FORM UNTUK MAHASISWA ================== -->
                <div id="peminjaman-form-mahasiswa" class="hidden space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Keperluan</label>
                        <select id="keperluan-select-mahasiswa" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm" onchange="toggleKeperluanFields('mahasiswa')">
                            <option value="lainnya">Lainnya</option>
                            <option value="matakuliah">Untuk Mata Kuliah</option>
                        </select>
                    </div>
                    <!-- Detail Mata Kuliah (hidden by default) -->
                    <div id="keperluan-details-mahasiswa" class="hidden space-y-4 p-4 bg-gray-50 rounded-md border">
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Nama Mata Kuliah</label>
                            <input type="text" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm" placeholder="Rekayasa Perangkat Lunak">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Dosen Pengampu</label>
                            <input type="text" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm" placeholder="Dr. Jane Smith, S.Kom, M.Kom">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Kelas</label>
                            <input type="text" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm" placeholder="Kelas A">
                        </div>
                    </div>
                </div>
                
                <!-- ================== FORM UNTUK DOSEN ================== -->
                <div id="peminjaman-form-dosen" class="hidden space-y-4">
                     <div>
                        <label class="block text-sm font-medium text-gray-700">Keperluan</label>
                        <select id="keperluan-select-dosen" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm" onchange="toggleKeperluanFields('dosen')">
                            <option value="lainnya">Lainnya</option>
                            <option value="mengajar">Untuk Mengajar Mata Kuliah</option>
                        </select>
                    </div>
                    <!-- Detail Mengajar (hidden by default) -->
                    <div id="keperluan-details-dosen" class="hidden space-y-4 p-4 bg-gray-50 rounded-md border">
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Mata Kuliah yang Diajar</label>
                            <input type="text" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm" placeholder="Dasar Pemrograman">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Kelas</label>
                            <input type="text" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm" placeholder="Kelas B">
                        </div>
                    </div>
                </div>
                
                <!-- ================== FORM UNTUK PEGAWAI ================== -->
                <div id="peminjaman-form-pegawai" class="hidden space-y-4">
                     <div>
                        <label class="block text-sm font-medium text-gray-700">Keperluan</label>
                        <select id="keperluan-select-pegawai" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm" onchange="toggleKeperluanFields('pegawai')">
                            <option value="lainnya">Lainnya</option>
                            <option value="kegiatan">Untuk Kegiatan Kampus</option>
                        </select>
                    </div>
                    <!-- Detail Kegiatan (hidden by default) -->
                    <div id="keperluan-details-pegawai" class="hidden space-y-4 p-4 bg-gray-50 rounded-md border">
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Nama Kegiatan</label>
                            <input type="text" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm" placeholder="Seminar Nasional">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Lokasi Kegiatan</label>
                            <input type="text" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm" placeholder="Aula Gedung A">
                        </div>
                    </div>
                </div>

                <!-- Input Tanggal & Waktu (Umum untuk semua) -->
                <div class="grid grid-cols-2 gap-4 pt-4 border-t">
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Tgl & Waktu Pinjam</label>
                        <input type="datetime-local" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm">
                    </div>
                     <div>
                        <label class="block text-sm font-medium text-gray-700">Batas Pengembalian</label>
                        <input type="datetime-local" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm">
                    </div>
                </div>
                <button class="w-full btn-primary font-bold py-2 px-4 rounded-md" onclick="closeModal('peminjaman-modal')">Ajukan Peminjaman</button>
            </div>
        </div>
    </div>
    
    <!-- Modal Daftar Alat -->
    <div id="daftar-alat-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-md p-6 relative max-h-screen overflow-y-auto">
            <button class="absolute top-4 right-4 text-gray-500 hover:text-gray-800" onclick="closeModal('daftar-alat-modal')">&times;</button>
            <h2 class="text-2xl font-bold text-primary mb-4">Daftar Alat Tersedia</h2>
            <ul class="space-y-3">
                <li class="p-3 bg-gray-50 rounded-md flex justify-between items-center"><span>Proyektor LCD Epson</span> <span class="font-semibold text-green-600">Tersedia: 3</span></li>
                <li class="p-3 bg-gray-50 rounded-md flex justify-between items-center"><span>Konektor HDMI</span> <span class="font-semibold text-green-600">Tersedia: 8</span></li>
                <li class="p-3 bg-gray-50 rounded-md flex justify-between items-center"><span>Stop Kontak 5 Lubang</span> <span class="font-semibold text-green-600">Tersedia: 12</span></li>
                <li class="p-3 bg-gray-50 rounded-md flex justify-between items-center"><span>Kabel VGA</span> <span class="font-semibold text-red-600">Tersedia: 0</span></li>
            </ul>
        </div>
    </div>
    
    <!-- Modal Kembalikan Alat -->
    <div id="kembalikan-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-md p-6 relative">
            <button class="absolute top-4 right-4 text-gray-500 hover:text-gray-800" onclick="closeModal('kembalikan-modal')">&times;</button>
            <h2 class="text-2xl font-bold text-primary mb-4">Konfirmasi Pengembalian</h2>
            <p class="text-gray-600 mb-4">Silakan unggah bukti pengembalian alat (misal: foto alat sudah diletakkan di tempatnya).</p>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Upload Bukti</label>
                <input type="file" class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-white hover:file:bg-red-900"/>
            </div>
            <button class="w-full mt-6 btn-primary font-bold py-2 px-4 rounded-md" onclick="closeModal('kembalikan-modal')">Konfirmasi Pengembalian</button>
        </div>
    </div>
    
    <!-- Modal Input Alat (Admin) -->
    <div id="input-alat-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-md p-6 relative max-h-screen overflow-y-auto">
            <button class="absolute top-4 right-4 text-gray-500 hover:text-gray-800" onclick="closeModal('input-alat-modal')">&times;</button>
            <h2 class="text-2xl font-bold text-primary mb-4">Input Data Alat Baru</h2>
             <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700">Nama Alat</label>
                    <input type="text" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm" placeholder="e.g. Proyektor InFocus">
                </div>
                 <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Jumlah</label>
                        <input type="number" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm" placeholder="5">
                    </div>
                     <div>
                        <label class="block text-sm font-medium text-gray-700">Kelengkapan</label>
                        <input type="text" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm" placeholder="Kabel Power, Tas">
                    </div>
                </div>
                 <div>
                    <label class="block text-sm font-medium text-gray-700">Deskripsi (Opsional)</label>
                    <textarea rows="3" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm" placeholder="Proyektor untuk ruang kelas besar..."></textarea>
                </div>
                <button class="w-full btn-primary font-bold py-2 px-4 rounded-md" onclick="closeModal('input-alat-modal')">Simpan Alat</button>
            </div>
        </div>
    </div>
    
    <!-- Modal Riwayat Peminjam (Admin) -->
    <div id="riwayat-peminjam-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-md p-6 relative max-h-screen overflow-y-auto">
             <button class="absolute top-4 right-4 text-gray-500 hover:text-gray-800" onclick="closeModal('riwayat-peminjam-modal')">&times;</button>
            <h2 class="text-2xl font-bold text-primary mb-4">Riwayat Peminjaman</h2>
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700">Filter berdasarkan tanggal</label>
                <input type="date" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm">
            </div>
            <div class="space-y-4">
                <!-- Contoh riwayat 1 -->
                <div class="bg-gray-50 p-3 rounded-md">
                    <p class="font-semibold">John Doe (Mahasiswa)</p>
                    <p class="text-sm">Alat: Proyektor LCD</p>
                    <p class="text-xs text-gray-500">Pinjam: 05 Okt 2025 | Kembali: 05 Okt 2025</p>
                    <p class="text-xs text-gray-500">Status: <span class="text-green-600 font-semibold">Selesai</span></p>
                </div>
                 <!-- Contoh riwayat 2 -->
                <div class="bg-gray-50 p-3 rounded-md">
                    <p class="font-semibold">Dr. Jane Smith (Dosen)</p>
                    <p class="text-sm">Alat: Stop Kontak</p>
                    <p class="text-xs text-gray-500">Pinjam: 04 Okt 2025 | Kembali: 04 Okt 2025</p>
                    <p class="text-xs text-gray-500">Status: <span class="text-green-600 font-semibold">Selesai</span></p>
                </div>
                 <!-- Contoh riwayat 3 -->
                <div class="bg-gray-50 p-3 rounded-md">
                    <p class="font-semibold">Budi (Mahasiswa)</p>
                    <p class="text-sm">Alat: Konektor HDMI</p>
                    <p class="text-xs text-gray-500">Pinjam: 03 Okt 2025 | Kembali: -</p>
                    <p class="text-xs text-gray-500">Status: <span class="text-blue-600 font-semibold">Dipinjam</span></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Variabel global untuk menyimpan tipe pengguna yang sedang login
        let currentUserType = 'mahasiswa';

        // Fungsi untuk menampilkan layar tertentu dan menyembunyikan yang lain
        function showScreen(screenId) {
            document.querySelectorAll('#app > div').forEach(screen => {
                screen.classList.add('hidden');
            });
            document.getElementById(screenId).classList.remove('hidden');
        }

        // Fungsi untuk mengganti tab login
        function switchLoginTab(tab) {
            if (tab === 'user') {
                document.getElementById('login-user-tab').classList.replace('tab-inactive', 'tab-active');
                document.getElementById('login-admin-tab').classList.replace('tab-active', 'tab-inactive');
                document.getElementById('login-user-form').classList.remove('hidden');
                document.getElementById('login-admin-form').classList.add('hidden');
            } else {
                document.getElementById('login-user-tab').classList.replace('tab-active', 'tab-inactive');
                document.getElementById('login-admin-tab').classList.replace('tab-inactive', 'tab-active');
                document.getElementById('login-user-form').classList.add('hidden');
                document.getElementById('login-admin-form').classList.remove('hidden');
            }
        }

        // Fungsi baru untuk mengganti input identifier di form login
        function switchLoginFormIdentifier(type) {
            const nimInput = document.getElementById('login-nim-input');
            const nipInput = document.getElementById('login-nip-input');
            if (type === 'mahasiswa') {
                nimInput.classList.remove('hidden');
                nipInput.classList.add('hidden');
            } else { // Untuk dosen & pegawai
                nimInput.classList.add('hidden');
                nipInput.classList.remove('hidden');
            }
        }
        
        // Fungsi untuk mengganti form registrasi
        function switchRegisterForm(type) {
            if (type === 'mahasiswa') {
                document.getElementById('register-mahasiswa-form').classList.remove('hidden');
                document.getElementById('register-dosen-pegawai-form').classList.add('hidden');
            } else {
                document.getElementById('register-mahasiswa-form').classList.add('hidden');
                document.getElementById('register-dosen-pegawai-form').classList.remove('hidden');
            }
        }

        // Fungsi simulasi login
        function login(type) {
            if (type === 'user') {
                // Tentukan tipe pengguna dari radio button yang dipilih
                currentUserType = document.querySelector('input[name="login_user_type"]:checked').value;
                updateUserDashboard(); // Perbarui info di dashboard
                showScreen('user-dashboard-screen');
            } else {
                showScreen('admin-dashboard-screen');
            }
        }

        // Fungsi baru untuk memperbarui info di dashboard pengguna
        function updateUserDashboard() {
            const userInfoName = document.getElementById('user-info-name');
            const userInfoDetail = document.getElementById('user-info-detail');

            if (currentUserType === 'mahasiswa') {
                userInfoName.textContent = 'Selamat Datang, Budi!';
                userInfoDetail.textContent = 'Mahasiswa - Sistem Informasi 2021';
            } else if (currentUserType === 'dosen') {
                userInfoName.textContent = 'Selamat Datang, Dr. Jane Smith!';
                userInfoDetail.textContent = 'Dosen - Teknik Informatika';
            } else if (currentUserType === 'pegawai') {
                userInfoName.textContent = 'Selamat Datang, Agus Setiawan!';
                userInfoDetail.textContent = 'Pegawai - Staf Akademik';
            }
        }
        
        // Fungsi untuk menampilkan modal
        function showModal(modalId) {
            if (modalId === 'peminjaman-modal') {
                preparePeminjamanForm(); // Siapkan form sebelum ditampilkan
            }
            document.getElementById(modalId).classList.remove('hidden');
        }

        // Fungsi untuk mempersiapkan form peminjaman sesuai tipe user
        function preparePeminjamanForm() {
            // Sembunyikan semua form spesifik terlebih dahulu
            document.getElementById('peminjaman-form-mahasiswa').classList.add('hidden');
            document.getElementById('peminjaman-form-dosen').classList.add('hidden');
            document.getElementById('peminjaman-form-pegawai').classList.add('hidden');

            // Tampilkan form yang sesuai
            if (currentUserType === 'mahasiswa') {
                document.getElementById('peminjaman-form-mahasiswa').classList.remove('hidden');
            } else if (currentUserType === 'dosen') {
                document.getElementById('peminjaman-form-dosen').classList.remove('hidden');
            } else if (currentUserType === 'pegawai') {
                document.getElementById('peminjaman-form-pegawai').classList.remove('hidden');
            }

            // Reset tampilan detail keperluan
            toggleKeperluanFields('mahasiswa');
            toggleKeperluanFields('dosen');
            toggleKeperluanFields('pegawai');
        }

        // Fungsi untuk menampilkan/menyembunyikan form detail keperluan
        function toggleKeperluanFields(userType) {
            const select = document.getElementById(`keperluan-select-${userType}`);
            const detailsDiv = document.getElementById(`keperluan-details-${userType}`);
            const specificValue = {
                mahasiswa: 'matakuliah',
                dosen: 'mengajar',
                pegawai: 'kegiatan'
            };

            if (select.value === specificValue[userType]) {
                detailsDiv.classList.remove('hidden');
            } else {
                detailsDiv.classList.add('hidden');
            }
        }

        // Fungsi untuk menutup modal
        function closeModal(modalId) {
            document.getElementById(modalId).classList.add('hidden');
        }

        // Inisialisasi: Tampilkan layar login saat pertama kali dibuka
        document.addEventListener('DOMContentLoaded', () => {
            showScreen('login-screen');
        });
    </script>

</body>
</html>
